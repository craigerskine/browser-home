<!doctype html>
<html lang="en" class="dark:bg-black bg-fixed" hidden>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Currently</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;400;700&amp;display=swap" rel="stylesheet" />
</head>
<body class="from-gray-800 to-transparent bg(gray-200 fixed) text(gray-600 center) font(mono thin) dark:(bg(gradient-to-b transparent))">

  <main class="w-full h-screen flex flex-col divide(y gray-500 opacity-10)">
    <section class="clock w-full h-full flex-1 flex flex-col justify-center">
      <h1 class="time w-full text-5xl md:text-[calc(5vw+5vh+.5vmin)] leading-none flex divide(x gray-500 opacity-10)">
        <span class="hours w-full flex-1"></span>
        <span class="minutes w-full flex-1"></span>
        <span class="seconds w-full flex-1"></span>
        <!-- <span class="milliseconds w-64"></span> -->
      </h1>
      <ul class="binary-digits w-full flex divide(x gray-500 opacity-10)">
        <li class="w-full py-4 lg:py-8 flex-1 flex items-end">
          <ul class="hour-1 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick hrs-1-2 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick hrs-1-1 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
          <ul class="hour-2 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick hrs-2-8 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick hrs-2-4 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick hrs-2-2 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick hrs-2-1 w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
        </li>
        <li class="w-full py-4 lg:py-8 flex-1 flex items-end">
          <ul class="minute-1 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick min-1-4 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick min-1-2 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick min-1-1 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
          <ul class="minute-2 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick min-2-8 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick min-2-4 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick min-2-2 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick min-2-1 w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
        </li>
        <li class="w-full py-4 lg:py-8 flex-1 flex items-end">
          <ul class="second-1 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick sec-1-4 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick sec-1-2 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick sec-1-1 ml-auto w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
          <ul class="second-2 px-4 w-full flex-1 flex flex-col space-y-2">
            <li class="tick sec-2-8 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick sec-2-4 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick sec-2-2 w-4 h-1 rounded-full transition-all duration-100"></li>
            <li class="tick sec-2-1 w-4 h-1 rounded-full transition-all duration-100"></li>
          </ul>
        </li>
      </ul>
    </section>
    <section class="misc w-full text-gray-700 flex flex-col justify-center">
      <ul class="font-bold flex lg:text-4xl divide(x gray-500 opacity-10)">
        <li class="py-4 lg:py-32 w-1/3 transition duration-300 hover:(text-gray-400) dark:(hover:(text-gray-300))" title="Internet/Beat Time">
          <h4 class="internet pl-5 flex items-center justify-center">
            <sup class="mr-2 text-sm uppercase font-black opacity-75">@</sup>
            <b class="beats font-normal">&nbsp;</b>
          </h4>
        </li>
        <li class="w-full flex-1 transition duration-300 hover:(text-gray-400) dark:(hover:(text-gray-300))">
          <ul class="date flex">
            <li class="py-4 lg:py-32 flex-1 flex items-center justify-center" title="Month">
              <b class="date-m font-normal">&nbsp;</b>
              <sup class="date-mm ml-2 text-xs uppercase opacity-75">&nbsp;</sup>
            </li>
            <li class="w-px bg(gray-500 opacity-10) transform -skew-x-12"></li>
            <li class="py-4 lg:py-32 flex-1 flex items-center justify-center" title="Day">
              <b class="date-d font-normal">&nbsp;</b>
              <sup class="date-dd ml-2 text-xs uppercase opacity-75">&nbsp;</sup>
            </li>
            <li class="w-px bg(gray-500 opacity-10) transform -skew-x-12"></li>
            <li class="py-4 lg:py-32 flex-1 flex items-center justify-center" title="Year">
              <b class="date-y font-normal">&nbsp;</b>
              <sup class="date-yy ml-2 text-xs uppercase opacity-75">AD</sup>
            </li>
          </ul>
        </li>
      </ul>
    </section>
  </main>

  <script>
    // jquery-like selector
    window.$_ = function(selector, next) {
      var selectors = document.querySelectorAll(selector);
      [].forEach.call(selectors, next);
    };

    function now(){
      var date = new Date();

      // date/time/beats
      var hours = date.getHours() % 12;
      hours = hours ? hours : 12;
      var minutes = date.getMinutes();
      var seconds = date.getSeconds();
      var milliseconds = (date.getMilliseconds()/10).toFixed(0);
      var beatHours = (date.getUTCHours() == 23) ? 0 : date.getUTCHours() + 1;
      var beats = Math.abs(((((beatHours * 60) + date.getUTCMinutes()) * 60) + date.getUTCSeconds()) / 86.4).toFixed(2);

      $_('.hours', function(e){e.innerHTML = pad(hours)});
      $_('.minutes', function(e){e.innerHTML = pad(minutes)});
      $_('.seconds', function(e){e.innerHTML = pad(seconds)});
      $_('.milliseconds', function(e){e.innerHTML = pad(milliseconds)});
      $_('.beats', function(e){e.innerHTML = beats});
      $_('.date-m', function(e){e.innerHTML = date.toLocaleDateString("en-US", {month: '2-digit'})});
      $_('.date-mm', function(e){e.innerHTML = date.toLocaleDateString("en-US", {month: 'short'})});
      $_('.date-d', function(e){e.innerHTML = date.toLocaleDateString("en-US", {day: '2-digit'})});
      $_('.date-dd', function(e){e.innerHTML = date.toLocaleDateString("en-US", {weekday: 'short'})});
      $_('.date-y', function(e){e.innerHTML = date.toLocaleDateString("en-US", {year: 'numeric'})});

      // binary
      var sec2 = seconds % 10;
      var sec1 = (seconds - sec2) / 10 % 10;
      var min2 = minutes % 10;
      var min1 = (minutes - min2) / 10 % 10;
      var hrs2 = hours % 10;
      var hrs1 = (hours - hrs2) / 10 % 10;

      binary(sec1, 'sec-1');
      binary(sec2, 'sec-2');
      binary(min1, 'min-1');
      binary(min2, 'min-2');
      binary(hrs1, 'hrs-1');
      binary(hrs2, 'hrs-2');

    }

    function pad(num){
      return ('0' + num).slice(-2);
    }

    var binary = function(n,t) {
      const tickOn = ['bg-blue-400', 'animate-tick'];
      const tickOff = ['ring-1', 'ring-gray-500', 'ring-opacity-25'];
      if(n == 1) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 2) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 3) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 4) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 5) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 6) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 7) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 8) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
      } else if(n == 9) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
      } else {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      };
    };

    now();
    setInterval(now, 1);
  </script>

  <script type="module">
    import {tw, setup, silent} from "https://cdn.skypack.dev/pin/twind@v0.16.11-QeLZmrfZsMzGLVRytSNH/mode=imports,min/optimized/twind/shim.js"
    import {css, theme, apply} from "https://cdn.skypack.dev/pin/twind@v0.16.11-QeLZmrfZsMzGLVRytSNH/mode=imports,min/optimized/twind/css.js"
    import * as colors from "https://cdn.skypack.dev/pin/twind@v0.16.11-QeLZmrfZsMzGLVRytSNH/mode=imports,min/optimized/twind/colors.js"
    setup({
      mode: silent,
      theme: {
        fontFamily: {
          mono: ['Roboto Mono', 'Menlo', 'Monaco', 'Consolas', '"Liberation Mono"', '"Courier New"', 'monospace'],
        },
        extend: {
          colors: {
            gray: colors.gray,
          },
          fontSize: {
            '7xl': ['7rem', { lineHeight: '1' }],
            '8xl': ['8rem', { lineHeight: '1' }],
            '9xl': ['9rem', { lineHeight: '1' }],
            '10xl': ['10rem', { lineHeight: '1' }],
          },
          keyframes: {
            tick: {
              '0%, 100%': { transform: 'scale(1)' },
              '50%': { transform: 'scale(1.1)' },
            },
          },
          animation: {
            'tick': 'tick .33s ease-in-out',
          },
        },
      },
    })
    tw(() => ({
      '@global': {
        ':root [v-cloak]': { '@apply': 'hidden', },
      }
    }))
  </script>

</body>
</html>
