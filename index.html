
<!doctype html>
<html lang="en" class="dark:bg-gray-900 bg-fixed" style="background-image: url('../img/noise.png');" hidden>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Currently</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;700&amp;display=swap" rel="stylesheet" />
  <style>
    @keyframes tick {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body class="dark:bg-gradient-to-b from-gray-800 to-transparent bg-gray-200 dark:bg-black bg-opacity-25 bg-fixed text-gray-600 font-mono font-hairline text-center">

  <main class="w-full h-screen flex flex-col items-center justify-center">
    <section class="w-full max-w-screen-xl flex">
      <div class="m-auto p-4 w-full">
        <h1 class="time p-4 w-full text-5xl lg:text-10xl leading-none flex items-center justify-between">
          <span class="hours w-64 text-center"></span>
          <span class="minutes w-64 text-center"></span>
          <span class="seconds w-64 text-center"></span>
          <!-- <span class="milliseconds w-64 text-center"></span> -->
        </h1>
        <ul class="binary py-8 px-4 w-full flex justify-between">
          <li class="px-2 lg:px-8 w-full lg:w-64 flex items-end justify-center">
            <ul class="hour-1 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick hrs-1-1 w-full h-1 transition duration-75"></li>
            </ul>
            <ul class="hour-2 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick hrs-2-8 w-full h-1 transition duration-75"></li>
              <li class="tick hrs-2-4 w-full h-1 transition duration-75"></li>
              <li class="tick hrs-2-2 w-full h-1 transition duration-75"></li>
              <li class="tick hrs-2-1 w-full h-1 transition duration-75"></li>
            </ul>
          </li>
          <li class="px-2 lg:px-8 w-full lg:w-64 flex items-end justify-center">
            <ul class="minute-1 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick min-1-4 w-full h-1 transition duration-75"></li>
              <li class="tick min-1-2 w-full h-1 transition duration-75"></li>
              <li class="tick min-1-1 w-full h-1 transition duration-75"></li>
            </ul>
            <ul class="minute-2 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick min-2-8 w-full h-1 transition duration-75"></li>
              <li class="tick min-2-4 w-full h-1 transition duration-75"></li>
              <li class="tick min-2-2 w-full h-1 transition duration-75"></li>
              <li class="tick min-2-1 w-full h-1 transition duration-75"></li>
            </ul>
          </li>
          <li class="px-2 lg:px-8 w-full lg:w-64 flex items-end justify-center">
            <ul class="second-1 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick sec-1-4 w-full h-1 transition duration-75"></li>
              <li class="tick sec-1-2 w-full h-1 transition duration-75"></li>
              <li class="tick sec-1-1 w-full h-1 transition duration-75"></li>
            </ul>
            <ul class="second-2 px-1 lg:px-6 w-full lg:w-32 flex flex-col space-y-2">
              <li class="tick sec-2-8 w-full h-1 transition duration-75"></li>
              <li class="tick sec-2-4 w-full h-1 transition duration-75"></li>
              <li class="tick sec-2-2 w-full h-1 transition duration-75"></li>
              <li class="tick sec-2-1 w-full h-1 transition duration-75"></li>
            </ul>
          </li>
        </ul>
      </div>
    </section>
    <section class="mx-auto w-full max-w-screen-xl text-gray-700">
      <ul class="py-12 lg:text-4xl font-bold flex items-center">
        <li class="pl-12 hover:text-white opacity-75 transition duration-300" title="Internet/Beat Time">
          <div class="internet pl-5 flex items-center justify-center">
            <small class="mr-1 text-blue-400 text-lg">@</small>
            <b class="beats">&nbsp;</b>
          </div>
        </li>
        <li class="ml-auto pr-12 hover:text-white transition duration-300">
          <ul class="date pr-5 flex">
            <li class="p-4 xl:p-8 flex-1 flex items-center justify-center" title="Month">
              <b class="date-m">&nbsp;</b>
              <sup class="date-mm ml-2 text-blue-400 text-xs">&nbsp;</sup>
            </li>
            <li class="p-4 xl:p-8 flex-1 flex items-center justify-center" title="Day">
              <b class="date-d">&nbsp;</b>
              <sup class="date-dd ml-2 text-blue-400 text-xs">&nbsp;</sup>
            </li>
            <li class="p-4 xl:p-8 flex-1 flex items-center justify-center" title="Year">
              <b class="date-y">&nbsp;</b>
              <sup class="date-yy ml-2 text-blue-400 text-xs">AD</sup>
            </li>
          </ul>
        </li>
      </ul>
    </section>
  </main>

  <script>
    // jquery-like selector
    window.$_ = function(selector, next) {
      var selectors = document.querySelectorAll(selector);
      [].forEach.call(selectors, next);
    };

    function now(){
      var date = new Date();

      // date/time/beats
      var hours = date.getHours() % 12;
      hours = hours ? hours : 12;
      var minutes = date.getMinutes();
      var seconds = date.getSeconds();
      var milliseconds = (date.getMilliseconds()/10).toFixed(0);
      var beatHours = (date.getUTCHours() == 23) ? 0 : date.getUTCHours() + 1;
      var beats = Math.abs(((((beatHours * 60) + date.getUTCMinutes()) * 60) + date.getUTCSeconds()) / 86.4).toFixed(2);

      $_('.hours', function(e){e.innerHTML = pad(hours)});
      $_('.minutes', function(e){e.innerHTML = pad(minutes)});
      $_('.seconds', function(e){e.innerHTML = pad(seconds)});
      $_('.milliseconds', function(e){e.innerHTML = pad(milliseconds)});
      $_('.beats', function(e){e.innerHTML = beats});
      $_('.date-m', function(e){e.innerHTML = date.toLocaleDateString("en-US", {month: '2-digit'})});
      $_('.date-mm', function(e){e.innerHTML = date.toLocaleDateString("en-US", {month: 'short'})});
      $_('.date-d', function(e){e.innerHTML = date.toLocaleDateString("en-US", {day: '2-digit'})});
      $_('.date-dd', function(e){e.innerHTML = date.toLocaleDateString("en-US", {weekday: 'short'})});
      $_('.date-y', function(e){e.innerHTML = date.toLocaleDateString("en-US", {year: 'numeric'})});

      // binary
      var sec2 = seconds % 10;
      var sec1 = (seconds - sec2) / 10 % 10;
      var min2 = minutes % 10;
      var min1 = (minutes - min2) / 10 % 10;
      var hrs2 = hours % 10;
      var hrs1 = (hours - hrs2) / 10 % 10;

      binary(sec1, 'sec-1');
      binary(sec2, 'sec-2');
      binary(min1, 'min-1');
      binary(min2, 'min-2');
      binary(hrs1, 'hrs-1');
      binary(hrs2, 'hrs-2');

    }

    function pad(num){
      return ('0' + num).slice(-2);
    }

    var binary = function(n,t) {
      const tickOn = ['bg-blue-400', 'on'];
      const tickOff = ['bg-gray-500', 'bg-opacity-25'];
      if(n == 1) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 2) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 3) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 4) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 5) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 6) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 7) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      } else if(n == 8) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
      } else if(n == 9) {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOn); e.classList.remove(...tickOff)});
      } else {
        $_('.'+t+'-1', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-2', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-4', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
        $_('.'+t+'-8', function(e){e.classList.add(...tickOff); e.classList.remove(...tickOn)});
      };
    };

    now();
    setInterval(now, 1);
  </script>

  <script type="module">
    import {tw, setup, silent} from "https://cdn.skypack.dev/twind/shim"
    import {css, theme, apply} from "https://cdn.skypack.dev/twind/css"
    import * as colors from "https://cdn.skypack.dev/twind/colors"
    setup({
      mode: silent,
      theme: {
        fontFamily: {
          mono: ['Roboto Mono', 'Menlo', 'Monaco', 'Consolas', '"Liberation Mono"', '"Courier New"', 'monospace'],
        },
        extend: {
          colors: {
            gray: colors.gray,
          },
          fontSize: {
            '7xl': ['7rem', { lineHeight: '1' }],
            '8xl': ['8rem', { lineHeight: '1' }],
            '9xl': ['9rem', { lineHeight: '1' }],
            '10xl': ['10rem', { lineHeight: '1' }],
          },
        },
      },
    })
    tw(() => ({
      '@global': {
        ':root v-cloak': apply('hidden'),
        '.tick.on': { 'animation': '.33s tick' },
      }
    }))
  </script>

</body>
</html>
